<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Pisces","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="码上有解">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="码上有解">
<meta property="article:author" content="Haiyefeng">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>码上有解</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">码上有解</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-history"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-list"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/26/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%A0%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/a.jpg">
      <meta itemprop="name" content="Haiyefeng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码上有解">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/26/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%A0%E9%A2%98/" class="post-title-link" itemprop="url">数据结构：线性表习题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-04-26 21:13:01 / 修改时间：23:25:32" itemprop="dateCreated datePublished" datetime="2020-04-26T21:13:01+08:00">2020-04-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>1、从顺序表中删除具有最小值的元素（假设唯一）并由函数返回被删元素的值。空出的位置由最后一个元素填补，若顺序表为空则显示出错误信息并退出运行。<br><strong>算法思想</strong><br>1）返回值是布尔值，当顺序表为空就返回false；<br>2）输入为保存最小值的整数指针value以及顺序表L。先初始化value，赋值为顺序表第一个元素，并初始化一个记录最小元素下标的整数j。<br>3）遍历数组，每次用value和当前元素作比较，value取较小值，并记录下标。<br>3）遍历后，value取得最小值，此时将j下标的元素用最后一个元素代替，并将顺序表长度减一，返回true。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">bool Find_Min(SqList *L, int *value)&#123;</span><br><span class="line">    if(L.length&#x3D;&#x3D;0)</span><br><span class="line">        return false;    &#x2F;&#x2F; 当顺序表为空就返回false</span><br><span class="line">    *value &#x3D; L-&gt;data[0]; &#x2F;&#x2F; 先初始化value，赋值为顺序表第一个元素</span><br><span class="line">    int j &#x3D; 0;           &#x2F;&#x2F; 初始化一个记录最小元素下标的整数j</span><br><span class="line">    for(int i&#x3D;1;i&lt;L-&gt;length;i++)    &#x2F;&#x2F; 遍历数组，每次用value和当前元素作比较，value取较小值，并记录下标</span><br><span class="line">        if(*value&gt;L-&gt;data[i]) &#123;</span><br><span class="line">            *value &#x3D; L-&gt;data[i];</span><br><span class="line">            j &#x3D; i;</span><br><span class="line">        &#125;</span><br><span class="line">    L-&gt;data[j] &#x3D; L-&gt;data[L-&gt;length-1];    &#x2F;&#x2F; 元素替换</span><br><span class="line">    L-&gt;length--;</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2、设计一个高效的算法，将顺序表L的所有元素逆置，要求算法的空间复杂度为O(1)。<br><strong>算法思想</strong><br>1）初始化一个顺序表元素类型的数据e，用以作为交换顺序表元素的中间值。<br>2）遍历顺序表前半部分的元素，交换第i个元素和第n-i-1个元素的值，用e作为中间值保存数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">void Reverse_List(SqList *L)&#123;</span><br><span class="line">    ElemType e;</span><br><span class="line">    for(int i&#x3D;0;i&lt;L-&gt;length&#x2F;2;i++)&#123;</span><br><span class="line">        e &#x3D; L-&gt;data[i];</span><br><span class="line">        L-&gt;data[i] &#x3D; L-&gt;data[L-&gt;length-i-1];</span><br><span class="line">        L-&gt;data[L-&gt;length-i-1] &#x3D; e</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3、对长度为n的顺序表L，编写一个时间复杂度为O(n)、空间复杂度为O(1)的算法，该算法删除线性表中所有值为x的数据元素。<br><strong>算法思想</strong><br>1）输入是顺序表L和长度n还有元素值x，需要初始化一个保存x元素个数的整数j，初始值为0；<br>2）遍历顺序表L，当遍历的元素值等于x，则增加j，否则就把这个元素向前移动j个位置（每删除一个等于x的元素，就会出现一个空缺，后面的元素相应的需要向前移动）<br>另外可以记录不等于x元素的个数，再把L-&gt;data[j]=L-&gt;data[i]即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">void Del_x(SqList *L, int n, ElemType x)&#123;</span><br><span class="line">    int j &#x3D; 0;</span><br><span class="line">    for(int i&#x3D;0;i&lt;n;i++)&#123;</span><br><span class="line">        if(L-&gt;data[i]&#x3D;&#x3D;x)</span><br><span class="line">            j++;</span><br><span class="line">        else</span><br><span class="line">            L-&gt;data[i-j] &#x3D; L-&gt;data[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4、从有序顺序表中删除其值在给定值s与t之间（s&lt;t）的所有元素，如果s或t不合理或顺序表为空，则显示出错误信息并退出运行。<br><strong>算法思想</strong><br>1）输入为有序顺序表L以及s和t，输出为布尔值，当s或t小于0或者s&lt;t时退出，返回false；<br>2）初始化两个整数i,j，记录前后两部分需要保留的首元素的下标；<br>2）因为是有序表，所以先遍历到大于s的那个值，这前面的数是要保留的，记录下i，即(i-1)之前的元素是需要保留的。然后接着遍历，遍历到大于t的元素，这后面的元素也是需要保留的，即j到(L.length-1)是需要保留的<br>3）把后半部分的元素从i下标位置开始放置，直至到结尾，调整顺序表长度，并返回true。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">bool Del_s_to_t(SqList *L, int s, int t)&#123;</span><br><span class="line">    if(s&lt;0||t&lt;0|s&gt;&#x3D;t||L-&gt;length&#x3D;&#x3D;0)</span><br><span class="line">        return false;</span><br><span class="line">    int i&#x3D;0, j;</span><br><span class="line">    while(L-&gt;data[i]&lt;s)</span><br><span class="line">        i++;</span><br><span class="line">    if(i&gt;L-&gt;data.length)</span><br><span class="line">        return false;</span><br><span class="line">    for(j&#x3D;i;L-&gt;data[j]&lt;t;j++);</span><br><span class="line">    while(j&lt;L-&gt;length)</span><br><span class="line">        L-&gt;data[i++] &#x3D; L-&gt;data[j++];</span><br><span class="line">    L.length &#x3D; i;</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>5、从顺序表中删除其值在给定值s与t之间（包含s和t，要求s&lt;t）的所有元素，如果s或t不合理或顺序表为空，则显示出错信息并退出运行。</p>
<p>6、从有序顺序表中删除所有其值重复的元素，使表中元素的值均不同。</p>
<p>7、将两个有序顺序表合并为一个新的有序顺序表，并由函数返回结果顺序表。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/20/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E7%BA%BF%E6%80%A7%E8%A1%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/a.jpg">
      <meta itemprop="name" content="Haiyefeng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码上有解">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/20/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E7%BA%BF%E6%80%A7%E8%A1%A8/" class="post-title-link" itemprop="url">数据结构：线性表</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-20 22:17:35" itemprop="dateCreated datePublished" datetime="2020-04-20T22:17:35+08:00">2020-04-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-21 22:24:55" itemprop="dateModified" datetime="2020-04-21T22:24:55+08:00">2020-04-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="线性表"><a href="#线性表" class="headerlink" title="线性表"></a>线性表</h4><h5 id="线性表的定义和基本操作"><a href="#线性表的定义和基本操作" class="headerlink" title="线性表的定义和基本操作"></a>线性表的定义和基本操作</h5><h6 id="线性表的定义"><a href="#线性表的定义" class="headerlink" title="线性表的定义"></a>线性表的定义</h6><p>线性表是具有相同数据类型的n（n&gt;=0）个数据元素的有限序列，其中n为表长，当n=0时，该线性表是一个空表。若用L命名线性表，则其一般表示为：<br>L=(a1, a2, …, ai, ai+1, …, an)<br><strong>特点</strong></p>
<ul>
<li>表中元素个数有限</li>
<li>表中元素具有逻辑上的顺序性</li>
<li>表中元素都是数据元素</li>
<li>表中元素的数据类型都相同</li>
<li>表中元素具有抽象性</li>
</ul>
<h6 id="线性表的基本操作"><a href="#线性表的基本操作" class="headerlink" title="线性表的基本操作"></a>线性表的基本操作</h6><p>InitList(&amp;L):初始化表。构造一个空的线性表<br>Length(L):求表长，返回线性表L的长度<br>LocateElem(L,e):按值查找操作<br>GetElem(L,i):按位查找操作<br>ListInsert(&amp;L,i,e):插入操作，在表L中的第i个位置上插入指定元素e<br>ListDelete(&amp;L,i,&amp;e):删除操作，删除表L中第i个位置的元素，并用e返回删除元素的值<br>PrintList(L):输出操作。<br>Empty(L):判空操作。若L为空表，则返回true，否则返回false<br>DestroyList(&amp;L):销毁操作。</p>
<h5 id="线性表的顺序表示"><a href="#线性表的顺序表示" class="headerlink" title="线性表的顺序表示"></a>线性表的顺序表示</h5><h6 id="顺序表的定义"><a href="#顺序表的定义" class="headerlink" title="顺序表的定义"></a>顺序表的定义</h6><p>线性表的顺序存储又称顺序表。它是用一组地址连续的存储单元依次存储线性表中的数据元素，从而使得逻辑上相邻的两个元素在物理位置上也相邻。<br><strong>特点</strong><br>顺序表中元素的逻辑顺序与其物理顺序相同</p>
<h6 id="顺序表的基本操作"><a href="#顺序表的基本操作" class="headerlink" title="顺序表的基本操作"></a>顺序表的基本操作</h6><p><strong>初始化</strong><br>静态分配：数组的大小和空间固定，一旦空间占满，再加上新的数据将会产生溢出，导致程序崩溃</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#define MaxSize 50     &#x2F;&#x2F; 定义线性表的最大长度</span><br><span class="line">typedef struct&#123;</span><br><span class="line">    ElemType data[MaxSize];  &#x2F;&#x2F; 顺序表的元素</span><br><span class="line">    int length;  &#x2F;&#x2F; 顺序表的当前长度</span><br><span class="line">&#125;SqList;         &#x2F;&#x2F; 顺序表的类型定义</span><br></pre></td></tr></table></figure>
<p>动态分配：存储数组的空间实在程序执行过程中通过动态存储分配语句分配的，一旦空间占满，就另外开辟一块更大的存储空间，用以替换原来的存储空间。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#define InitSize 100 &#x2F;&#x2F; 表长度的初始定义</span><br><span class="line">typedef struct&#123;</span><br><span class="line">    Elemtype *data; &#x2F;&#x2F; 指示动态分配数组的指针</span><br><span class="line">    int MaxSize, length; &#x2F;&#x2F; 数组的最大容量和当前个数</span><br><span class="line">&#125;SeqList;</span><br><span class="line">&#x2F;&#x2F; 动态分配语句L.data &#x3D; (ElemType*)malloc(sizeof(Elemtype)*InitSize);</span><br></pre></td></tr></table></figure>
<p><strong>插入操作</strong><br>在顺序表L的第i(1&lt;=i&lt;=L.length+1)个位置插入新元素e。若i的输入不合法，则返回false，表示插入失败；否则，将顺序表的第i个元素及其后的所有元素右移一个位置，腾出一个空位插入新元素e，顺序表长度增加1，插入成功，返回true</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">bool ListInsert(SqList &amp;L, int i, ElemType e) &#123;</span><br><span class="line">    if(i&lt;1||i&gt;L.length+1)        &#x2F;&#x2F; 判断i的范围是否有效</span><br><span class="line">        return false;</span><br><span class="line">    if(L.length&gt;&#x3D;MaxSize)        &#x2F;&#x2F; 当前存储空间已满，不能插入</span><br><span class="line">        return false;</span><br><span class="line">    for(int j&#x3D;L.length;j&gt;&#x3D;i;j--)    &#x2F;&#x2F; 将第i个元素及之后的元素后移</span><br><span class="line">        L.data[j]&#x3D;L.data[j-1];</span><br><span class="line">    L.data[i-1]&#x3D;e;                &#x2F;&#x2F; 在位置i放入e</span><br><span class="line">    L.length++;                   &#x2F;&#x2F; 线性表长度加1</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最好的情况：插入到表尾，此时不需要后移，时间复杂度为O(1)<br>最坏的情况：插入到表头，此时需要后移n次，时间复杂度为O(n)<br>平均情况:<br><img src="/2020/04/20/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E7%BA%BF%E6%80%A7%E8%A1%A8/a.png" alt="平均"><br>因此线性表插入算法的平均复杂度为O(n)<br><strong>删除操作</strong><br>删除顺序表L中第i(1&lt;=i&lt;=L.length)个位置的元素，若成功则返回true，并将被删除的元素用引用变量e返回，否则返回false。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">bool ListDelete(SqList &amp;L, int i,Elemtype &amp;e) &#123;</span><br><span class="line">        if(i&lt;1||i&gt;L.length)        &#x2F;&#x2F; 判断i的范围是否有效</span><br><span class="line">            return false;</span><br><span class="line">        e&#x3D;L.data[i-1]                &#x2F;&#x2F; 将被删除的元素赋值给e</span><br><span class="line">        for(int j&#x3D;i;j&lt;L.length;j++)  &#x2F;&#x2F; 将第i个位置后的元素前移</span><br><span class="line">            L.data[j-1]&#x3D;L.data[j];</span><br><span class="line">        L.length--;                  &#x2F;&#x2F; 线性表长度减1</span><br><span class="line">        return true;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<p>最好情况：删除表尾元素，无需移动元素，时间复杂度为O(1)<br>最坏情况：删除表头元素，需要移动除第一个元素之外的所有元素，时间复杂度为O(n)<br>平均情况:<br><img src="/2020/04/20/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E7%BA%BF%E6%80%A7%E8%A1%A8/b.png" alt="平均"><br><strong>按值查找</strong><br>在顺序表中查找第一个元素值等于e的元素，并返回其位序。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bool ListDelete(SqList &amp;L, Elemtype e) &#123;</span><br><span class="line">    for(int i&#x3D;0;i&lt;L.length;i++)</span><br><span class="line">        if(L.data[i] &#x3D;&#x3D; e)</span><br><span class="line">            return i+1;    &#x2F;&#x2F; 下标为i的元素值等于e，返回其位序i+1</span><br><span class="line">    return 0        &#x2F;&#x2F; 退出循环，说明查找失败</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>最好的情况：查找的元素就在表头，比较一次，时间复杂度为O(1)<br>最坏的情况：查找的元素在表尾，比较n次，时间复杂度为O(n)<br>平均情况：<br><img src="/2020/04/20/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E7%BA%BF%E6%80%A7%E8%A1%A8/c.png" alt="平均"><br>因此线性表按值查找算法的平均时间复杂度为O(n)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/15/Leetcode%EF%BC%9A%E5%9B%9E%E6%96%87%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/a.jpg">
      <meta itemprop="name" content="Haiyefeng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码上有解">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/15/Leetcode%EF%BC%9A%E5%9B%9E%E6%96%87%E6%95%B0/" class="post-title-link" itemprop="url">Leetcode：回文数</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-15 21:27:19" itemprop="dateCreated datePublished" datetime="2020-04-15T21:27:19+08:00">2020-04-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-16 00:01:20" itemprop="dateModified" datetime="2020-04-16T00:01:20+08:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Leetcode/" itemprop="url" rel="index"><span itemprop="name">Leetcode</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h5><p>判断一个整数是否是回文数。回文数是指正序（从左向右）和倒序（从右向左）读都是一样的整数。</p>
<p>示例 1:</p>
<p>输入: 121<br>输出: true<br>示例 2:</p>
<p>输入: -121<br>输出: false<br>解释: 从左向右读, 为 -121 。 从右向左读, 为 121- 。因此它不是一个回文数。<br>示例 3:</p>
<p>输入: 10<br>输出: false<br>解释: 从右向左读, 为 01 。因此它不是一个回文数。<br>进阶:</p>
<p>你能不将整数转为字符串来解决这个问题吗？</p>
<p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode-cn.com/problems/palindrome-number" target="_blank" rel="noopener">https://leetcode-cn.com/problems/palindrome-number</a><br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p>
<h5 id="题解："><a href="#题解：" class="headerlink" title="题解："></a>题解：</h5><p>效率似乎都不太高，后续再试试<br><strong>双端队列</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 转化为字符串的列表，使用双端队列，对比出列元素是否一致，不一致则返回False，直到没有元素或只剩一个元素</span><br><span class="line">class Solution(object):</span><br><span class="line">    def isPalindrome(self, x):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type x: int</span><br><span class="line">        :rtype: bool</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        x_list &#x3D; list(str(x))</span><br><span class="line">        while len(x_list) &gt; 1:</span><br><span class="line">            if x_list.pop(0) !&#x3D; x_list.pop():</span><br><span class="line">                return False</span><br><span class="line">        return True</span><br></pre></td></tr></table></figure>
<p><strong>指针</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 遍历字符串，对比对应两个位置的字符是否相同，不一致则返回False，直到遍历完成</span><br><span class="line">class Solution1(object):</span><br><span class="line">    def isPalindrome(self, x):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type x: int</span><br><span class="line">        :rtype: bool</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        length &#x3D; len(str(x))</span><br><span class="line">        x_str &#x3D; str(x)</span><br><span class="line">        for i in range(0, length&#x2F;&#x2F;2):</span><br><span class="line">            if x_str[i] !&#x3D; x_str[length-1-i]:</span><br><span class="line">                return False</span><br><span class="line">        return True</span><br></pre></td></tr></table></figure>
<p><strong>整数取余翻转</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">class Solution2:</span><br><span class="line">    def isPalindrome(self, x):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type x: int</span><br><span class="line">        :rtype: bool</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        if x &lt; 0 or (x !&#x3D; 0 and x % 10 &#x3D;&#x3D; 0):</span><br><span class="line">            return False</span><br><span class="line">        if x &lt; 10:</span><br><span class="line">            return True</span><br><span class="line">        reverse_x &#x3D; 0</span><br><span class="line">        while x &gt; reverse_x:</span><br><span class="line">            reverse_x &#x3D; (x % 10) + reverse_x * 10</span><br><span class="line">            x &#x3D; x &#x2F;&#x2F; 10</span><br><span class="line">        if reverse_x &#x3D;&#x3D; x or reverse_x &#x2F;&#x2F; 10 &#x3D;&#x3D; x:</span><br><span class="line">            return True</span><br><span class="line">        else:</span><br><span class="line">            return False</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/14/Leetcode%EF%BC%9A%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/a.jpg">
      <meta itemprop="name" content="Haiyefeng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码上有解">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/14/Leetcode%EF%BC%9A%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/" class="post-title-link" itemprop="url">Leetcode：两数之和</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-14 22:46:36" itemprop="dateCreated datePublished" datetime="2020-04-14T22:46:36+08:00">2020-04-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-16 00:11:30" itemprop="dateModified" datetime="2020-04-16T00:11:30+08:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Leetcode/" itemprop="url" rel="index"><span itemprop="name">Leetcode</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h5><p>两数之和<br>给定一个整数数组 nums 和一个目标值 target，请你在该数组中找出和为目标值的那 两个 整数，并返回他们的数组下标。</p>
<p>你可以假设每种输入只会对应一个答案。但是，你不能重复利用这个数组中同样的元素。</p>
<p>示例:</p>
<p>给定 nums = [2, 7, 11, 15], target = 9</p>
<p>因为 nums[0] + nums[1] = 2 + 7 = 9<br>所以返回 [0, 1]</p>
<p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode-cn.com/problems/two-sum" target="_blank" rel="noopener">https://leetcode-cn.com/problems/two-sum</a><br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p>
<h6 id="题解："><a href="#题解：" class="headerlink" title="题解："></a>题解：</h6><p><strong>暴力破解法</strong><br>要找出列表中两数之和等于某个数的两个数的下标，最容易想到的就是按照顺序把列表中的数两两相加，当和等于目标值时就返回。这里可以做两层遍历，第一层是从第一个数到倒数第二个数中依次取数，第二层是在第一层取得的数的后面到最后一个数中取数，然后两两相加，把所有可能都遍历一遍，这样的时间复杂度是O(n^2)<br><img src="/2020/04/14/Leetcode%EF%BC%9A%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/%E6%9A%B4%E5%8A%9B.png" alt="暴力"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def twoSum(self, nums, target):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type nums: List[int]</span><br><span class="line">        :type target: int</span><br><span class="line">        :rtype: List[int]</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        for i in range(0, len(nums)-1):</span><br><span class="line">            for j in range(i+1, len(nums)):</span><br><span class="line">                if nums[i] + nums[j] &#x3D;&#x3D; target:</span><br><span class="line">                    return [i, j]</span><br><span class="line">        return</span><br></pre></td></tr></table></figure>

<p><strong>哈希表法</strong><br>我们可以以空间换时间，把每次遍历的结果保存下来，然后在下一次遍历时在已经遍历过的数据中查看是否有合适的数据，有则返回，没有则把这个数保存，然后继续遍历。我们可以应用python的字典来保存这些遍历过的数，以数的值作为key，value则保存下标。然后在遍历某个数num的时候，先用target-num，用这个值作为key去字典中找，如果能找到， 则返回这两个数的key，否则将num的值以及下标保存下来。值得注意的是，这里不能用hash_map.get(target - val)来判断是否有对应值，因为索引0也会判定为False<br><img src="/2020/04/14/Leetcode%EF%BC%9A%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/%E5%93%88%E5%B8%8C.png" alt="哈希"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Solution:</span><br><span class="line">    def twoSum(self, nums, target):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type nums: List[int]</span><br><span class="line">        :type target: int</span><br><span class="line">        :rtype: List[int]</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        hash_map &#x3D; &#123;&#125;</span><br><span class="line">        for i, val in enumerate(nums):</span><br><span class="line">            if hash_map.get(target - val) !&#x3D; None:</span><br><span class="line">                return [hash_map.get(target - val), i]</span><br><span class="line">            else:</span><br><span class="line">                hash_map.update(&#123;val:i&#125;)</span><br><span class="line">        return</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/12/redis%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/a.jpg">
      <meta itemprop="name" content="Haiyefeng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码上有解">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/12/redis%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">redis基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-04-12 19:37:19 / 修改时间：21:42:04" itemprop="dateCreated datePublished" datetime="2020-04-12T19:37:19+08:00">2020-04-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">非关系型数据库</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h4><h5 id="MySQL与NoSQL"><a href="#MySQL与NoSQL" class="headerlink" title="MySQL与NoSQL"></a>MySQL与NoSQL</h5><h6 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h6><blockquote>
<p>Mysql</p>
</blockquote>
<p>关系型数据库，适用于存储有特定结构的一系列数据，结构化存储。</p>
<blockquote>
<p>关系型数据库优点</p>
</blockquote>
<ul>
<li>事务一致性：通过事务处理保持数据的一致性</li>
<li>复杂查询：支持SQL，可以进行 JOIN 等复杂查询</li>
<li>容易理解：二维表结构是非常贴近逻辑世界的一个概念，关系模型相对网状、层次等其他模型来说更容易理解</li>
<li>使用方便：通用的 SQL 语言使得操作关系型数据库非常方便</li>
<li>易于维护：丰富的完整性(实体完整性、参照完整性和用户定义的完整性)大大减低了数据冗余和数据不一致的概率</li>
</ul>
<blockquote>
<p>关系型数据库缺点</p>
</blockquote>
<ul>
<li>读写性能：在数据量达到一定规模时，由于关系型数据库的系统逻辑非常复杂，为了维护一致性，使得其非常容易发生死锁等的并发问题，所以导致其读写速度下滑非常严重</li>
<li>表结构更新：表结构可以在被定义之后更新，但是如果有比较大的结构变更的话就会变得比较复杂</li>
<li>高并发：网站的用户并发性非常高，往往达到每秒上万次读写请求，对于传统关系型数据库来说，硬盘I/O是一个很大的瓶颈</li>
<li>海量数据：对于关系型数据库来说，在一张包含海量数据的表中查询，效率是非常低的</li>
</ul>
<h6 id="NoSQL"><a href="#NoSQL" class="headerlink" title="NoSQL"></a>NoSQL</h6><blockquote>
<p>NoSQL(<strong><em>not only SQL</em></strong>)</p>
</blockquote>
<p>非关系型数据库（NoSQL）是对不同于传统的关系数据库的数据库管理系统的统称<br>非关系型数据库包括：</p>
<ul>
<li>KV键值存储(key-value)：memcached、Redis</li>
<li>面向图关系的数据库：Neo4j、InfoGrid</li>
<li>面向文档的数据库：MongoDB、CouchDB</li>
<li>面向列的数据库：Cassandra、HBase</li>
</ul>
<blockquote>
<p>非关系型数据库优点</p>
</blockquote>
<ul>
<li>读写性能：无需经过 SQL 层的解析，读写性能很高。主要例子有Redis，由于其逻辑简单，而且纯内存操作，使得其性能非常出色，单节点每秒可以处理超过10万次读写操作；</li>
<li>简单的扩展：基于键值对，数据没有耦合性，容易扩展。典型例子是 Cassandra，由于其架构是类似于经典的 P2P，所以能通过轻松地添加新的节点来扩展这个集群；</li>
<li>存储格式多：支持key-value形式、文档形式、图片形式，而关系型数据库则只支持基础类型；</li>
<li>低廉的成本：这是大多数分布式数据库共有的特点，因为主要都是开源软件，没有昂贵的License成本；</li>
</ul>
<blockquote>
<p>非关系型数据库缺点</p>
</blockquote>
<ul>
<li>不提供对 SQL 的支持：如果不支持 SQL 这样的工业标准，将会对用户产生一定的学习和应用迁移成本</li>
<li>支持的特性不够丰富：现有产品所提供的功能都比较有限，大多数 NoSQL 数据库都不支持事务，也不像 MS SQL Server 和 Oracle 那样能提供各种附加功能，比如 BI 和报表等</li>
<li>现有产品的不够成熟：大多数产品都还处于初创期，和关系型数据库几十年的完善不可同日而语</li>
</ul>
<p>总结：<br>先留着吧，后续再填，认识还不够深</p>
<h5 id="Redis基本操作"><a href="#Redis基本操作" class="headerlink" title="Redis基本操作"></a>Redis基本操作</h5><blockquote>
<p>连接Redis</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;bin</span><br><span class="line">redis-server redis.config # 后面的是redis配置文件的文件路径及文件名</span><br><span class="line">redis-cli -h 127.0.0.1 -p 6379 # 默认为127.0.0.1，所以可以不用加-h</span><br></pre></td></tr></table></figure>
<blockquote>
<p>切换数据库</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 2 # 切换数据库，默认是0</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看数据库大小</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DBSIZE</span><br></pre></td></tr></table></figure>
<blockquote>
<p>清空当前的数据库</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flushdb</span><br></pre></td></tr></table></figure>
<blockquote>
<p>清空所有数据库</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flushall</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看key是否存在</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exists key_name # 查看key_name是否存在</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看某个键的过期时间</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ttl key_name # 查看key_name的过期时间</span><br></pre></td></tr></table></figure>

<h5 id="五大数据类型"><a href="#五大数据类型" class="headerlink" title="五大数据类型"></a>五大数据类型</h5><h6 id="String（字符串）"><a href="#String（字符串）" class="headerlink" title="String（字符串）"></a>String（字符串）</h6><p>基本命令：<br>应用场景：</p>
<h6 id="List（列表）"><a href="#List（列表）" class="headerlink" title="List（列表）"></a>List（列表）</h6><p>基本命令：<br>应用场景：</p>
<h6 id="Set（集合）"><a href="#Set（集合）" class="headerlink" title="Set（集合）"></a>Set（集合）</h6><p>无序集合<br>基本命令：<br>应用场景：</p>
<h6 id="Hash（哈希）"><a href="#Hash（哈希）" class="headerlink" title="Hash（哈希）"></a>Hash（哈希）</h6><p>基本命令：<br>应用场景：</p>
<h6 id="Zset（有序集合）"><a href="#Zset（有序集合）" class="headerlink" title="Zset（有序集合）"></a>Zset（有序集合）</h6><p>基本命令：<br>应用场景：</p>
<h5 id="三种特殊数据类型"><a href="#三种特殊数据类型" class="headerlink" title="三种特殊数据类型"></a>三种特殊数据类型</h5><h6 id="Geospatial地理位置"><a href="#Geospatial地理位置" class="headerlink" title="Geospatial地理位置"></a>Geospatial地理位置</h6><p>基本命令：<br>应用场景：</p>
<h6 id="Hyperloglog"><a href="#Hyperloglog" class="headerlink" title="Hyperloglog"></a>Hyperloglog</h6><p>基本命令：<br>应用场景：</p>
<h6 id="Bitmap"><a href="#Bitmap" class="headerlink" title="Bitmap"></a>Bitmap</h6><p>基本命令：<br>应用场景：</p>
<h5 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h5><p>Redis事务本质，是一组命令的集合，一个事务的命令会被序列化，在执行过程中按顺序依次执行<br>一次性、顺序性、排他性<br>Redis的事务没有隔离级别的概念，并且不保证原子性（单条命令具有原子性）</p>
<blockquote>
<p>基本命令</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">multi # 开启事务</span><br><span class="line"># 输入一系列命令 set、get、rem等</span><br><span class="line">exec # 执行事务</span><br></pre></td></tr></table></figure>
<blockquote>
<p>为什么Redis的事务不保证原子性？<br>当发生错误时，有可能会直接导致整个事务不运行，但也有可能会执行事务中的某些命令，取决于错误的类型。</p>
</blockquote>
<ul>
<li>编译型异常（代码有问题，命令有错，输入时即报错），事务中的所有命令都不执行</li>
<li>运行时异常（I/O），如果输入命令时没有报错，待命令执行时才报错，那么其他正常的命令会继续执行</li>
</ul>
<h5 id="Redis持久化"><a href="#Redis持久化" class="headerlink" title="Redis持久化"></a>Redis持久化</h5><p>持久化包含两种方式，RDB（Redis DataBase）和AOF（Append Only File）</p>
<h6 id="RDB"><a href="#RDB" class="headerlink" title="RDB"></a>RDB</h6><p>在指定时间内将内存快照保存下来，替换旧的快照</p>
<h6 id="AOF"><a href="#AOF" class="headerlink" title="AOF"></a>AOF</h6><p>当达到某个条件后，把一系列命令以追加的方式写入日志文件中</p>
<h5 id="Redis发布订阅"><a href="#Redis发布订阅" class="headerlink" title="Redis发布订阅"></a>Redis发布订阅</h5><p>包含两个角色，发布者和订阅者，内部机制是当订阅者订阅时，Redis会新建一个key保存该频道，频道的value保存着所有订阅者。发布者发布内容写入频道后，频道通知所有订阅者</p>
<h5 id="Redis主从复制"><a href="#Redis主从复制" class="headerlink" title="Redis主从复制"></a>Redis主从复制</h5><h6 id="一主二从"><a href="#一主二从" class="headerlink" title="一主二从"></a>一主二从</h6><p>主-从<br>   -从<br>一个主机，两个从机，主机负责处理写操作，而从机只能读。<br>成为从机后，主机会将数据全量复制到从机中，而后会以增量复制的形式复制到从机。<br>主机宕机后，不会自动切换</p>
<h6 id="层层链路"><a href="#层层链路" class="headerlink" title="层层链路"></a>层层链路</h6><p>主-从-从<br>实际上中间的服务器还是从机，第三个服务器为第二个服务器的从机，第三个服务器还是可以从第二个服务器获取数据。</p>
<h6 id="哨兵模式"><a href="#哨兵模式" class="headerlink" title="哨兵模式"></a>哨兵模式</h6><p>设置哨兵进程去监控主机和从机状态，当主机宕机后，会根据内部的算法机制推举出新的主机，让从机成为主机，当原来的主机恢复后，此时也只能成为现有主机的从机。<br>在实际场景中，为了防止哨兵进程死掉，会同时运行多个哨兵进程，哨兵进程不仅监视所有的主从机，另外还会互相监控。选举时，以票数多的作为新的主机。</p>
<h5 id="Redis缓存穿透和雪崩"><a href="#Redis缓存穿透和雪崩" class="headerlink" title="Redis缓存穿透和雪崩"></a>Redis缓存穿透和雪崩</h5><h6 id="缓存穿透"><a href="#缓存穿透" class="headerlink" title="缓存穿透"></a>缓存穿透</h6><p>当用户请求数据时，会先经过缓存，如果此时缓存中没有该数据则会去请求数据库，如果此时请求的量过大，那么数据库可能无法承受这个压力<br>解决方案：</p>
<ul>
<li>布隆过滤器</li>
<li>缓存空对象</li>
</ul>
<h6 id="缓存击穿"><a href="#缓存击穿" class="headerlink" title="缓存击穿"></a>缓存击穿</h6><p>当一个热点数据过期时，在key失效的那个瞬间，大量的请求会直接去请求数据库，此时会给数据库带来巨大压力<br>解决方案：</p>
<ul>
<li>设置永不过期</li>
<li>加互斥锁</li>
</ul>
<h6 id="雪崩"><a href="#雪崩" class="headerlink" title="雪崩"></a>雪崩</h6><p>某个特定时间，key集体过期或者Redis宕机<br>解决方案：</p>
<ul>
<li>Redis高可用（异地多活）</li>
<li>限流降级</li>
<li>数据预热</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/03/MySQL%E7%B4%A2%E5%BC%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/a.jpg">
      <meta itemprop="name" content="Haiyefeng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码上有解">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/03/MySQL%E7%B4%A2%E5%BC%95/" class="post-title-link" itemprop="url">MySQL索引</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-04-03 00:03:00 / 修改时间：00:17:13" itemprop="dateCreated datePublished" datetime="2020-04-03T00:03:00+08:00">2020-04-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySQL/" itemprop="url" rel="index"><span itemprop="name">MySQL</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Mysql索引"><a href="#Mysql索引" class="headerlink" title="Mysql索引"></a>Mysql索引</h3><h3 id="索引的定义"><a href="#索引的定义" class="headerlink" title="索引的定义"></a>索引的定义</h3><blockquote>
<p>索引是帮助Mysql高效获取数据的排好序的数据结构</p>
</blockquote>
<h3 id="索引的数据结构"><a href="#索引的数据结构" class="headerlink" title="索引的数据结构"></a>索引的数据结构</h3><p>索引的数据结构可以是二叉树、红黑树、Hash表或者B-Tree<br>但查找效率高的是Hash表和B-Tree，其中Hash表不太好进行范围查找，比较适合于等于的查询</p>
<h3 id="MySQL的索引结构"><a href="#MySQL的索引结构" class="headerlink" title="MySQL的索引结构"></a>MySQL的索引结构</h3><blockquote>
<p>mysql虽然支持Hash表及B-Tree，但一般还是用B-Tree</p>
</blockquote>
<p>其实最终使用的数据结构是B+Tree，因为B-Tree会在每个结点都存储数据，导致每层可以存的数据太少，而mysql每层的数据大小限制为16KB，所以为了让最终可以存储更多的数据，也为了让层数尽可能少，采用了B+Tree，B+Tree和B-Tree不同之处在于只有叶子结点才会存储数据或者说地址，其他结点仅仅保存索引值，且保存的也是下一层索引的中间值。<br><img src="/2020/04/03/MySQL%E7%B4%A2%E5%BC%95/b+%E6%A0%91.png" alt="b+树"><br>Mysql表的默认存储引擎MyISAM采用的是非聚集索引，即数据和索引是分开存储在两个文件的，MYD保存数据，MYI保存索引。叶子结点保存的是地址，再去MYD查找数据。</p>
<p>而InnodDb是使用聚集索引，保存在ibd文件中，数据和索引保存在一个文件中。叶子结点保存的是索引对应列的所有数据。</p>
<p>InnoDb的索引也是B+Tree，那么需要一个索引（主键）来创建这棵树，并且为了简化插入，最好是自增主键，这样每个新增的数据可以直接插入到最后面，而不是在中间，中间如果超过最大存储空间（16KB），就必须对树的结构进行调整</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/30/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/a.jpg">
      <meta itemprop="name" content="Haiyefeng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码上有解">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/30/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86/" class="post-title-link" itemprop="url">二叉树的遍历</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-30 23:27:28" itemprop="dateCreated datePublished" datetime="2020-03-30T23:27:28+08:00">2020-03-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-03 00:01:28" itemprop="dateModified" datetime="2020-04-03T00:01:28+08:00">2020-04-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="二叉树的遍历"><a href="#二叉树的遍历" class="headerlink" title="二叉树的遍历"></a>二叉树的遍历</h1><h2 id="二叉树的递归遍历"><a href="#二叉树的递归遍历" class="headerlink" title="二叉树的递归遍历"></a>二叉树的递归遍历</h2><p>因为二叉树的结构是递归的，所以遍历时也很容易用递归来实现。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">class Node():</span><br><span class="line">    &quot;&quot;&quot; 定义链结点（树结点） &quot;&quot;&quot;</span><br><span class="line">    def __init__(self, item):</span><br><span class="line">        self.data &#x3D; item</span><br><span class="line">        self.left &#x3D; None</span><br><span class="line">        self.right &#x3D; None</span><br><span class="line"></span><br><span class="line">class BinaryTree():</span><br><span class="line">    &quot;&quot;&quot; 二叉树 &quot;&quot;&quot;</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.root &#x3D; None # 定义二叉树根节点</span><br><span class="line"></span><br><span class="line">    def add_node(self, item):</span><br><span class="line">        if not self.root:</span><br><span class="line">            self.root &#x3D; Node(item)</span><br><span class="line">            return</span><br><span class="line">        stack &#x3D; [self.root]</span><br><span class="line">        while stack:</span><br><span class="line">            node &#x3D; stack.pop(0)</span><br><span class="line">            if not node.left:</span><br><span class="line">                node.left &#x3D; Node(item)</span><br><span class="line">                break</span><br><span class="line">            else:</span><br><span class="line">                stack.append(node.left)</span><br><span class="line">            if not node.right:</span><br><span class="line">                node.right &#x3D; Node(item)</span><br><span class="line">                break</span><br><span class="line">            else:</span><br><span class="line">                stack.append(node.right)</span><br></pre></td></tr></table></figure>
<h3 id="前序遍历（PreOrder）"><a href="#前序遍历（PreOrder）" class="headerlink" title="前序遍历（PreOrder）"></a>前序遍历（PreOrder）</h3><p>若二叉树不为空，则<br>1）先访问根节点;<br>2）先序遍历左子树;<br>3）先序遍历右子树;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">def pre_order(self, node):</span><br><span class="line">    &quot;&quot;&quot;                      1</span><br><span class="line">    前序遍历                &#x2F;  \</span><br><span class="line">                           2   3</span><br><span class="line">                          &#x2F; \  &#x2F;\</span><br><span class="line">                         4  5 6  7   1 2 4 5 3 6 7</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    if not node:</span><br><span class="line">        return</span><br><span class="line">    print(node.data)</span><br><span class="line">    self.pre_order(node.left)</span><br><span class="line">    self.pre_order(node.right)</span><br></pre></td></tr></table></figure>
<h3 id="中序遍历（InOrder）"><a href="#中序遍历（InOrder）" class="headerlink" title="中序遍历（InOrder）"></a>中序遍历（InOrder）</h3><p>若二叉树不为空，则<br>1）中序遍历左子树;<br>2）访问根节点;<br>3）中序遍历右子树;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">def in_order(self, node):</span><br><span class="line">    &quot;&quot;&quot;                      1</span><br><span class="line">    中序遍历                &#x2F;  \</span><br><span class="line">                           2   3</span><br><span class="line">                          &#x2F; \  &#x2F;\</span><br><span class="line">                         4  5 6  7   4 2 5 1 6 3 7</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    if not node:</span><br><span class="line">        return</span><br><span class="line">    self.pre_order(node.left)</span><br><span class="line">    print(node.data)</span><br><span class="line">    self.pre_order(node.right)</span><br></pre></td></tr></table></figure>
<h3 id="后序遍历（PostOrder）"><a href="#后序遍历（PostOrder）" class="headerlink" title="后序遍历（PostOrder）"></a>后序遍历（PostOrder）</h3><p>若二叉树不为空，则<br>1）后序遍历左子树;<br>2）后序遍历右子树;<br>3）访问根节点;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">def post_order(self, node):</span><br><span class="line">    &quot;&quot;&quot;                      1</span><br><span class="line">    后序遍历                &#x2F;  \</span><br><span class="line">                           2   3</span><br><span class="line">                          &#x2F; \  &#x2F;\</span><br><span class="line">                         4  5 6  7   4 5 2 6 7 3 1</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    if not node:</span><br><span class="line">        return</span><br><span class="line">    self.pre_order(node.left)</span><br><span class="line">    self.pre_order(node.right)</span><br><span class="line">    print(node.data)</span><br></pre></td></tr></table></figure>
<h2 id="二叉树的非递归遍历"><a href="#二叉树的非递归遍历" class="headerlink" title="二叉树的非递归遍历"></a>二叉树的非递归遍历</h2><p>类似于广度优先遍历，借助于栈</p>
<h3 id="前序遍历（PreOrder）-1"><a href="#前序遍历（PreOrder）-1" class="headerlink" title="前序遍历（PreOrder）"></a>前序遍历（PreOrder）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">def pre_order(self):</span><br><span class="line">    &quot;&quot;&quot;                      1</span><br><span class="line">    前序遍历                &#x2F;  \</span><br><span class="line">                           2   3</span><br><span class="line">                          &#x2F; \  &#x2F;\</span><br><span class="line">                         4  5 6  7   1 2 4 5 3 6 7</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    if not self.root:</span><br><span class="line">        return</span><br><span class="line">    stack &#x3D; []</span><br><span class="line">    select_node &#x3D; self.root</span><br><span class="line">    while select_node or stack:</span><br><span class="line">        if select_node:</span><br><span class="line">            print(select_node.data)</span><br><span class="line">            stack.append(select_node)</span><br><span class="line">            select_node &#x3D; select_node.left</span><br><span class="line">        else:</span><br><span class="line">            select_node &#x3D; stack.pop()</span><br><span class="line">            select_node &#x3D; select_node.right</span><br></pre></td></tr></table></figure>
<h3 id="中序遍历（InOrder）-1"><a href="#中序遍历（InOrder）-1" class="headerlink" title="中序遍历（InOrder）"></a>中序遍历（InOrder）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">def in_order(self):</span><br><span class="line">    &quot;&quot;&quot;                      1</span><br><span class="line">    中序遍历                &#x2F;  \</span><br><span class="line">                           2   3</span><br><span class="line">                          &#x2F; \  &#x2F;\</span><br><span class="line">                         4  5 6  7   4 2 5 1 6 3 7</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    if not self.root:</span><br><span class="line">        return</span><br><span class="line">    stack &#x3D; []</span><br><span class="line">    select_node &#x3D; self.root</span><br><span class="line">    while select_node or stack:</span><br><span class="line">        if select_node:</span><br><span class="line">            stack.append(select_node)</span><br><span class="line">            select_node &#x3D; select_node.left</span><br><span class="line">        else:</span><br><span class="line">            select_node &#x3D; stack.pop()</span><br><span class="line">            print(select_node.data)</span><br><span class="line">            select_node &#x3D; select_node.right</span><br></pre></td></tr></table></figure>
<h3 id="后序遍历（PostOrder）-1"><a href="#后序遍历（PostOrder）-1" class="headerlink" title="后序遍历（PostOrder）"></a>后序遍历（PostOrder）</h3><p>这里运用两个栈，第一个栈以根左右进栈，以根-右-左出栈，第二个栈以根-右-左进栈，最后以左右根出栈。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">def post_order(self):</span><br><span class="line">    &quot;&quot;&quot;                      1</span><br><span class="line">    后序遍历                 &#x2F; \</span><br><span class="line">                           2   3</span><br><span class="line">                          &#x2F; \  &#x2F;\</span><br><span class="line">                         4  5 6  7   4 5 2 6 7 3 1</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    if not self.root:</span><br><span class="line">        return</span><br><span class="line">    stack &#x3D; [self.root]</span><br><span class="line">    post_stack &#x3D; []</span><br><span class="line">    while stack:</span><br><span class="line">        node &#x3D; stack.pop()</span><br><span class="line">        post_stack.append(node)</span><br><span class="line">        if node.left:</span><br><span class="line">            stack.append(node.left)</span><br><span class="line">        if node.right:</span><br><span class="line">            stack.append(node.right)</span><br><span class="line">    while post_stack:</span><br><span class="line">        node &#x3D; post_stack.pop()</span><br><span class="line">        print(node.data)</span><br></pre></td></tr></table></figure>
<h2 id="二叉树的层次遍历"><a href="#二叉树的层次遍历" class="headerlink" title="二叉树的层次遍历"></a>二叉树的层次遍历</h2><h2 id="由遍历序列构造二叉树"><a href="#由遍历序列构造二叉树" class="headerlink" title="由遍历序列构造二叉树"></a>由遍历序列构造二叉树</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/29/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%AE%80%E4%BB%8B%E5%8F%8A%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/a.jpg">
      <meta itemprop="name" content="Haiyefeng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码上有解">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/29/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%AE%80%E4%BB%8B%E5%8F%8A%E5%AE%9E%E7%8E%B0/" class="post-title-link" itemprop="url">二叉树简介及实现</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-29 19:46:48" itemprop="dateCreated datePublished" datetime="2020-03-29T19:46:48+08:00">2020-03-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-01 01:20:52" itemprop="dateModified" datetime="2020-04-01T01:20:52+08:00">2020-04-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="二叉树的简介及实现（python）"><a href="#二叉树的简介及实现（python）" class="headerlink" title="二叉树的简介及实现（python）"></a>二叉树的简介及实现（python）</h1><h2 id="二叉树的介绍"><a href="#二叉树的介绍" class="headerlink" title="二叉树的介绍"></a>二叉树的介绍</h2><h3 id="二叉树的定义"><a href="#二叉树的定义" class="headerlink" title="二叉树的定义"></a>二叉树的定义</h3><p>二叉树是一种特殊的树，<br>1）是有序树<br>2）二叉树的每个结点的度不大于2<br>3）结点必须分左右，即使是单个结点</p>
<h3 id="二叉树的存储结构"><a href="#二叉树的存储结构" class="headerlink" title="二叉树的存储结构"></a>二叉树的存储结构</h3><p>二叉树的存储结构有顺序存储和链式存储两种，顺序存储适用于满二叉树和完全二叉树，其他一般二叉树若用顺序存储会造成大量的空间浪费，因此一般采用链式存储来存储二叉树。<br>二叉链表至少包含数据域data，左指针域lchild和右指针域rchild</p>
<h2 id="二叉树的代码实现"><a href="#二叉树的代码实现" class="headerlink" title="二叉树的代码实现"></a>二叉树的代码实现</h2><h3 id="定义树结点的类"><a href="#定义树结点的类" class="headerlink" title="定义树结点的类"></a>定义树结点的类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class Node():</span><br><span class="line">    &quot;&quot;&quot; 定义链结点（树结点） &quot;&quot;&quot;</span><br><span class="line">    def __init__(self, item):</span><br><span class="line">        self.data &#x3D; item</span><br><span class="line">        self.left &#x3D; None</span><br><span class="line">        self.right &#x3D; None</span><br></pre></td></tr></table></figure>

<h3 id="定义二叉树类"><a href="#定义二叉树类" class="headerlink" title="定义二叉树类"></a>定义二叉树类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">class BinaryTree():</span><br><span class="line">    &quot;&quot;&quot; 二叉树 &quot;&quot;&quot;</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.root &#x3D; None # 定义二叉树根节点</span><br><span class="line"></span><br><span class="line">    def add_node(self, item):</span><br><span class="line">        if not self.root:</span><br><span class="line">            self.root &#x3D; Node(item)</span><br><span class="line">            return</span><br><span class="line">        queue &#x3D; [self.root]</span><br><span class="line">        while queue:</span><br><span class="line">            node &#x3D; queue.pop(0)</span><br><span class="line">            if not node.left:</span><br><span class="line">                node.left &#x3D; Node(item)</span><br><span class="line">                break</span><br><span class="line">            else:</span><br><span class="line">                queue.append(node.left)</span><br><span class="line">            if not node.right:</span><br><span class="line">                node.right &#x3D; Node(item)</span><br><span class="line">                break</span><br><span class="line">            else:</span><br><span class="line">                queue.append(node.right)</span><br><span class="line"></span><br><span class="line">    def breadth_first_traversal(self):</span><br><span class="line">        &quot;&quot;&quot; 广度优先遍历二叉树 &quot;&quot;&quot;</span><br><span class="line">        queue &#x3D; [self.root]</span><br><span class="line">        while queue:</span><br><span class="line">            node &#x3D; queue.pop(0)</span><br><span class="line">            print(node.data)</span><br><span class="line">            if node.left:</span><br><span class="line">                queue.append(node.left)</span><br><span class="line">            if node.right:</span><br><span class="line">                queue.append(node.right)</span><br></pre></td></tr></table></figure>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>插入时也是按广度优先插入，因此按照广度优先遍历打印出来应该和插入的顺序一致</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">binary_tree &#x3D; BinaryTree()</span><br><span class="line">binary_tree.add_node(1)</span><br><span class="line">binary_tree.add_node(2)</span><br><span class="line">binary_tree.add_node(3)</span><br><span class="line">binary_tree.add_node(4)</span><br><span class="line">binary_tree.add_node(5)</span><br><span class="line">binary_tree.add_node(6)</span><br><span class="line">binary_tree.breadth_first_traversal()</span><br></pre></td></tr></table></figure>
<p>输出：<br>1<br>2<br>3<br>4<br>5<br>6</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/a.jpg">
      <meta itemprop="name" content="Haiyefeng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码上有解">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">Celery的介绍与使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-29 16:52:03 / 修改时间：18:10:06" itemprop="dateCreated datePublished" datetime="2020-03-29T16:52:03+08:00">2020-03-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Celery/" itemprop="url" rel="index"><span itemprop="name">Celery</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Celery分布式系统的介绍及使用"><a href="#Celery分布式系统的介绍及使用" class="headerlink" title="Celery分布式系统的介绍及使用"></a>Celery分布式系统的介绍及使用</h1><p>【摘要】本文主要分三部分，第一部分是对Celery的简要介绍，第二部分讲述如何安装python的celery库并使用，最后一部分则是说明如何在Django项目中使用Celery。</p>
<p>【正文】<br>项目中我们经常遇到一些耗时比较长的任务，例如发送邮件、短信，同步人员信息到数据库中登等，这个时候我们可以将它们放到后台的Celery分布式系统中，让它去对这些任务进行分配调度处理。</p>
<hr>
<h2 id="一-Celery的简要介绍"><a href="#一-Celery的简要介绍" class="headerlink" title="一    Celery的简要介绍"></a>一    Celery的简要介绍</h2><h3 id="1-1-概述"><a href="#1-1-概述" class="headerlink" title="1.1    概述"></a>1.1    概述</h3><p>Celery是一个简单、灵活且可靠的、处理大量消息的分布式系统；专注于实时处理的异步任务队列；同时也支持任务调度；</p>
<h3 id="1-2-Celery角色介绍"><a href="#1-2-Celery角色介绍" class="headerlink" title="1.2    Celery角色介绍"></a>1.2    Celery角色介绍</h3><p><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329173040924_16636.png" alt="celery角色"><br>主要角色：<br>生产者（task prouducer）：产生异步任务<br>任务调度器（task scheduler）：产生定时任务<br>消息队列（task queue）：当生产者或者任务调度器调用异步任务时，将任务放入队列，等待消费者消费。可以用redis或RabbitMQ充当消息队列<br>消费者（task consumer）：celery提供的任务执行的单元，可以消费消息队列的任务<br>数据库（backend）：存储消费者消费后的结果</p>
<h3 id="1-3-使用场景"><a href="#1-3-使用场景" class="headerlink" title="1.3    使用场景"></a>1.3    使用场景</h3><p>Celery分布式系统比较适合用来处理以下任务：<br>1）异步任务：将耗时操作任务提交给Celery去异步执行，而不阻塞其他任务的执行，比如发送邮件/短信、音视频处理等等<br>2）定时任务：类似于crontab，比如每日数据统计、人员信息同步等</p>
<h2 id="二-Python-Celery的安装及使用"><a href="#二-Python-Celery的安装及使用" class="headerlink" title="二    Python Celery的安装及使用"></a>二    Python Celery的安装及使用</h2><h3 id="2-1-安装celery及redis"><a href="#2-1-安装celery及redis" class="headerlink" title="2.1    安装celery及redis"></a>2.1    安装celery及redis</h3><p>1）    安装celery<br>pip install celery[redis]<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175216477_11537.png" alt="安装celery"><br>2）    下载redis并安装<br>一直点下一步，可以加入环境变量，完成<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175238662_15567.png" alt="安装redis"></p>
<h3 id="2-2-使用python-celery"><a href="#2-2-使用python-celery" class="headerlink" title="2.2    使用python celery"></a>2.2    使用python celery</h3><p>1）写入一个需要耗时阻塞的脚本并执行，可见脚本需要休眠4s后才打印出结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">def add(x, y):</span><br><span class="line">    time.sleep(4)</span><br><span class="line">    return x + y</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    print(&quot;start task ...&quot;)</span><br><span class="line">    result &#x3D; add(2, 8)</span><br><span class="line">    print(&quot;end task ...&quot;)</span><br><span class="line">    print(result)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175309742_14640.png" alt="打印结果"><br>2）使用celery创建异步任务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import time</span><br><span class="line">from celery import Celery</span><br><span class="line"></span><br><span class="line">broker &#x3D; &#39;redis:&#x2F;&#x2F;localhost:6379&#x2F;1&#39;</span><br><span class="line">backend &#x3D; &#39;redis:&#x2F;&#x2F;localhost:6379&#x2F;2&#39;</span><br><span class="line">app &#x3D; Celery(&#39;my_task&#39;, broker&#x3D;broker, backend&#x3D;backend)</span><br><span class="line"></span><br><span class="line">@app.task</span><br><span class="line">def add(x, y):</span><br><span class="line">    time.sleep(4)</span><br><span class="line">    return x + y</span><br><span class="line"></span><br><span class="line">result &#x3D; add.apply_async(args&#x3D;(2, 8))</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure>
<p>控制台立即输出结果，并把任务存入消息队列<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175326398_14576.png" alt="不阻塞打印结果"><br>3）启动worker<br>celery worker -A tasks -l INFO<br>此时如果celery是4.0以上的版本会报如下错误：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Task handler raised error: ValueError(&#39;not enough values to unpack (expected 3, got 0)&#39;,)</span><br><span class="line">Traceback (most recent call last):</span><br></pre></td></tr></table></figure>
<p>解决方案：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install eventlet</span><br><span class="line">celery worker -A tasks -l INFO -P eventlet</span><br></pre></td></tr></table></figure>
<p>4）启动celery worker消费队列任务并查看结果<br>运行脚本app.py后，broker任务队列（这里指定为redis的db1）会把该任务加入到队列中，并且等待celery worker去消费，等到消费者消费完后会将结果存入到数据库（这里指定为redis的db2）中<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175346999_13307.png" alt="redis db2"><br>可以在redis的db2找到相应的输出，另外也可以用result.ready()来确认任务完成情况，并用result.get()获取任务执行结果<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175401084_2343.png" alt="redis manager"><br>2.3    celery封装成模块<br>1）    文件目录配置如下<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175411238_22315.png" alt="目录配置"><br>2）配置<strong>init</strong>初始化文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding&#x3D;utf-8 -*-</span><br><span class="line">from celery import Celery</span><br><span class="line"></span><br><span class="line">app &#x3D; Celery(&#39;test&#39;) app.config_from_object(&#39;celery_task.celery_config&#39;)  # 加载配置信息</span><br></pre></td></tr></table></figure>
<p>这里定义了一个celery实例，并且载入了配置文件的信息<br>3）添加配置信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">BROKER_URL &#x3D; &#39;redis:&#x2F;&#x2F;localhost:6379&#x2F;1&#39;  # 指定消息队列</span><br><span class="line">CELERY_RESULT_BACKEND &#x3D; &#39;redis:&#x2F;&#x2F;localhost:6379&#x2F;2&#39;  # 指定结果存储的数据库</span><br><span class="line">CELERY_TIMEZONE &#x3D; &#39;Asia&#x2F;Shanghai&#39;  # 设置celery时区</span><br><span class="line"># 将监听的任务导入</span><br><span class="line">CELERY_IMPORTS &#x3D; (</span><br><span class="line">    &#39;celery_task.task1&#39;</span><br><span class="line">)</span><br><span class="line">4）添加任务</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import time</span><br><span class="line">from celery_task import app</span><br><span class="line">@app.task</span><br><span class="line">def add(x, y):</span><br><span class="line">    time.sleep(4)</span><br><span class="line">    return x + y</span><br></pre></td></tr></table></figure>
<p>5）启动celery worker<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175432087_25400.png" alt="启动worker"><br>6）运行异步任务<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175443207_185.png" alt="运行异步任务"><br>7）查看执行结果<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175452718_14192.png" alt="查看结果"></p>
<p>2.4    celery定时任务<br>1）添加配置信息<br>在原来的配置文件中加入如下配置，定义定时任务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CELERYBEAT_SCHEDULE &#x3D; &#123;</span><br><span class="line">    &#39;task1&#39;: &#123;</span><br><span class="line">        &#39;task&#39;: &#39;celery_task.task1.add&#39;,</span><br><span class="line">        &#39;schedule&#39;: timedelta(seconds&#x3D;10),</span><br><span class="line">        &#39;args&#39;: (2,8)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2）启动定时调度（单条命令启动worker与beat：celery –B –A celery_task worker –l INFO）<br>另起一个终端，并输入命令启动定时调度：celery beat –A celery_task –l INFO<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175507544_10508.png" alt="定时调度"><br>3）查看结果<br>任务每隔十秒就会执行一次，并且也是异步执行<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175519455_2211.png" alt="定时结果"><br>三    Django Celery的安装及使用<br>使用版本（python==2.7.17，django==1.8.11，django-celery==3.3.1，redis==2.10.6）<br>3.1    安装django-celery<br>1）pip install django-celery<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175536263_11147.png" alt="安装django-celery"><br>2）在配置文件中加入djcelery<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175546831_8438.png" alt="djcelery"><br>3.2    配置文件目录及添加任务<br>1）配置文件目录如下，新建一个app，celery_test3<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175557174_31933.png" alt="配置目录"><br>2）添加配置信息（celery_test3.celeryconfig.py）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import djcelery</span><br><span class="line">djcelery.setup_loader()</span><br><span class="line"></span><br><span class="line">CELERY_IMPORTS &#x3D; (  # 配置需要导入的任务模块</span><br><span class="line">    &#39;celery_task.tasks&#39;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">CELERY_QUEUES &#x3D; &#123;   # 配置celery任务队列</span><br><span class="line">    &#39;beat_tasks&#39;: &#123;</span><br><span class="line">        &#39;exchange&#39;: &#39;beat_tasks&#39;,</span><br><span class="line">        &#39;exchange_type&#39;: &#39;direct&#39;,</span><br><span class="line">        &#39;binding_key&#39;: &#39;beat_tasks&#39;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#39;work_queue&#39;: &#123;</span><br><span class="line">        &#39;exchange&#39;: &#39;work_queue&#39;,</span><br><span class="line">        &#39;exchange_type&#39;: &#39;direct&#39;,</span><br><span class="line">        &#39;binding_key&#39;: &#39;work_queue&#39;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">CELERY_DEFAULT_QUEUE &#x3D; &#39;work_queue&#39;  # 设置默认任务队列</span><br><span class="line">CELERYD_FORCE_EXECV &#x3D; True  # 有些情况可以防止死锁</span><br><span class="line">CELERYD_CONCURRENCY &#x3D; 4  # 设置任务并发数</span><br><span class="line">CELERY_ACKS_LATE &#x3D; True  # 设置允许任务失败后重试</span><br><span class="line">CELERYD_MAX_TASKS_PER_CHILD &#x3D; 100  # 设置每个worker执行多少次任务后销毁，避免内存泄漏</span><br><span class="line">CELERYD_TASK_TIME_LIMIT &#x3D; 12 * 30  # 设置每个任务的超时时间</span><br></pre></td></tr></table></figure>
<p>3）添加任务(celery_task.tasks.py)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from celery.task import Task</span><br><span class="line">import time</span><br><span class="line">class TestTask(Task):</span><br><span class="line">    name &#x3D; &#39;test-task&#39;</span><br><span class="line">    def run(self, x, y):</span><br><span class="line">        print(&#39;start test task&#39;)</span><br><span class="line">        time.sleep(4)</span><br><span class="line">        return x + y</span><br></pre></td></tr></table></figure>
<p>3.3    配置路由、视图函数及全局配置</p>
<p>1）添加路由及视图函数<br>celery_uni/urls.py</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from django.contrib import admin</span><br><span class="line">from django.urls import path</span><br><span class="line">from django.conf.urls import url</span><br><span class="line">from test_task import views</span><br><span class="line"></span><br><span class="line">urlpatterns &#x3D; [</span><br><span class="line">    path(&#39;admin&#x2F;&#39;, admin.site.urls),</span><br><span class="line">    url(&#39;^test&#x2F;$&#39;, views.test, name&#x3D;&#39;test&#39;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>test_task/views.py</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">from django.shortcuts import render</span><br><span class="line"></span><br><span class="line"># Create your views here.</span><br><span class="line">from test_task.tasks import TestTask</span><br><span class="line">from django.http import JsonResponse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def test(request):</span><br><span class="line">    print(&quot;request task start!&quot;)</span><br><span class="line">    test_task &#x3D; TestTask()</span><br><span class="line">    test_task.apply_async(args&#x3D;(1, 2), kwargs&#x3D;&#123;&quot;a&quot;:1,&quot;b&quot;:2&#125;)</span><br><span class="line">    return JsonResponse(data&#x3D;&#123;&quot;message&quot;: &quot;ok&quot;&#125;)</span><br></pre></td></tr></table></figure>

<p>2）将配置信息添加到全局配置文件中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># celery</span><br><span class="line">from celery_uni.celeryconfig import *</span><br><span class="line">BROKER_BACKEND &#x3D; &#39;redis&#39;</span><br><span class="line">BROKER_URL &#x3D; &#39;redis:&#x2F;&#x2F;localhost:6379&#x2F;1&#39;</span><br><span class="line">CELERY_RESULT_BACKEND &#x3D; &#39;redis:&#x2F;&#x2F;loaclhost:6379&#x2F;2&#39;</span><br></pre></td></tr></table></figure>
<p>3.4    启动项目及测试<br>1）启动celery worker，运行项目并执行任务<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175851863_9467.png" alt="启动django worker"><br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175905999_9904.png" alt="打开网址"><br>2）查看任务结果<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175914742_12372.png" alt="查看结果"><br>3）加入定时任务(celery_test3/celeryconfig.py)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">from datetime import timedelta</span><br><span class="line"></span><br><span class="line">CELERYBEAT_SCHEDULE &#x3D; &#123;</span><br><span class="line">    &#39;task1&#39;: &#123;</span><br><span class="line">        &#39;task&#39;: &#39;test-task&#39;,</span><br><span class="line">        &#39;schedule&#39;: timedelta(seconds&#x3D;5),</span><br><span class="line">        &#39;args&#39;: (2,8),</span><br><span class="line">        &#39;options&#39;: &#123;</span><br><span class="line">            &#39;queue&#39;: &#39;beat_tasks&#39;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4）运行定时调度器(python manage.py celery beat –l INFO)<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175931535_14416.png" alt="运行调度器"><br>5）查看运行结果<br><img src="/2020/03/29/Celery%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/20200329175939822_32274.png" alt="查看结果"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/29/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/a.jpg">
      <meta itemprop="name" content="Haiyefeng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码上有解">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/29/hello-world/" class="post-title-link" itemprop="url">欢迎 来到码上有解</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-29 00:53:31 / 修改时间：17:17:50" itemprop="dateCreated datePublished" datetime="2020-03-29T00:53:31+08:00">2020-03-29</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="会写些什么"><a href="#会写些什么" class="headerlink" title="会写些什么"></a>会写些什么</h2><p>1.我会在这里把一些学习的内容进行总结<br>2.写一些项目练习<br>3.写日志心情</p>
<h3 id="文章分类"><a href="#文章分类" class="headerlink" title="文章分类"></a>文章分类</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Haiyefeng"
      src="/images/a.jpg">
  <p class="site-author-name" itemprop="name">Haiyefeng</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">12</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Haiyefeng</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
